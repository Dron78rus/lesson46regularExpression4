<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <style>
      p {
        font-weight: bold;
      }
      .topic {
        text-decoration: underline;
        margin: 10px;
      }
      .task {
        margin: 20px 10px;
      }
      .container {
        padding-bottom: 15px;
        border-bottom: 1px black solid;
      }
    </style>

    <p>Задание 1</p>

    <div class="topic">На позитивный и негативный просмотр</div>
    <div class="task">
      С помощью позитивного и негативного просмотра найдите все строки по
      шаблону 3 буквы a, затем буква b и поменяйте 3 буквы a на знак '!'. То
      есть из 'aaab' нужно сделать '!b'.
    </div>

    <div class="container divT1"></div>

    <p>Задание 2</p>

    <div class="task">
      С помощью позитивного и негативного просмотра найдите все строки по
      шаблону 3 буквы a, затем любая буква, но не b и поменяйте 3 буквы a на
      знак '!'. То есть из, к примеру, 'aaaw' нужно сделать '!w', а 'aaab' не
      поменяется
    </div>

    <div class="container divT2"></div>

    <p>Задание 3</p>

    <div class="topic">На replace</div>
    <div class="task">
      Дана строка с целыми числами. С помощью регулярки преобразуйте строку так,
      чтобы вместо этих чисел стояли их квадраты.
    </div>

    <div class="container divT3"></div>

    <p>Задание 4</p>

    <div class="task">
      Дана строка с целыми числами. Найдите числа, стоящие в кавычках и
      увеличьте их в два раза. Пример: из строки 2aaa'3'bbb'4' сделаем строку
      2aaa'6'bbb'8'.
    </div>

    <div class="container divT4"></div>

    <p>Задание 5</p>

    <div class="task">
      Дана строка в которой есть вставки {{текст}}. Найдите все такие вставки и
      поменяйте в них порядок букв на обратный (то есть из 'текст' нужно сделать
      'тскет')
    </div>

    <div class="container divT5"></div>

    <p>Задание 6</p>

    <div class="task">
      Дана строка '23 + 35 ='. Числа могут быть любыми. Выведите на экран
      результат операции в виде '23 + 35 = 58'.
    </div>

    <div class="container divT6"></div>

    <p>Задание 7</p>

    <div class="topic">Головоломки</div>
    <div class="task">
      Определите, что год находится в интервале от 1900 до 2100 с помощью одного
      только регулярного выражения.
    </div>

    <div class="container divT7"></div>

    <p>Задание 8</p>

    <div class="task">
      С помощью test определите, что переданная строка является корректным
      временем вида '12:59', '23:41', '00:12', '00:00', '09:15'. Время '24.00',
      '25.00', '12.60', '12.93', '41.93' является некорректным.
    </div>

    <div class="container divT8"></div>

    <p>Задание 9</p>

    <div class="task">
      С помощью test определите, что переданная строка является корректным
      временем вида '9.59 am', '12.30 pm'.
    </div>

    <div class="container divT9"></div>

    <p>Задание 10</p>

    <div class="task">
      Удалите одной регуляркой все слова из предложения, содержащие две
      одинаковые следующие друг за другом буквы
    </div>

    <div class="container divT10"></div>

    <p>Задание 11</p>

    <div class="task">
      Удалите одной регуляркой все повторяющиеся слова из строки
    </div>

    <div class="container divT11"></div>

    <p>Задание 12</p>

    <div class="task">
      Решите предыдущую задачу с учетом того, что слово может повторяться много
      раз. Например 'dsf xxx xxx xxx xxx xxx sd' должно вернуть 'dsf xxx sd'.
    </div>

    <div class="container divT12"></div>

    <script>
      // http://old.code.mu/tasks/javascript/regular/rabota-s-regulyarnymi-vyrazeniyami-v-javascript-glava-4.html

      // задание 1

      const d = document
      const str = 'aaab aaax aaab aaav aaa5 aaa5 aaab aaab'
      const divT1 = d.querySelector('.divT1')

      function outputOfResult(parent, receivedValue, initialValue = 'none') {
        if (initialValue !== 'none') {
          const sourceString = `Исходная строка: ${initialValue}`
          const newDiv = d.createElement('div')
          parent.appendChild(newDiv)
          newDiv.innerHTML = sourceString
        }

        const modifiedString = `Результат: ${receivedValue}`
        const newDiv2 = d.createElement('div')
        parent.appendChild(newDiv2)
        newDiv2.innerHTML = modifiedString
      }

      const str2 = str.replace(/aaa(?=b)/g, 'совпадение!')
      const str3 = str.replace(/aaa(?=[0-9])/g, 'совпадение!')
      const str4 = str.replace(/aaa(?![0-9])/g, 'совпадение!')

      outputOfResult(divT1, str2, str)
      outputOfResult(divT1, str3)
      outputOfResult(divT1, str4)

      // задание 2

      const divT2 = d.querySelector('.divT2')
      const str5 = 'aaab aaax aaab aaav aaa5 aaa5 aaab aaab'

      const str6 = str5.replace(/aaa(?!b)/g, 'совпадение!')

      outputOfResult(divT2, str6, str5)

      // задание 3

      const divT3 = d.querySelector('.divT3')
      const str7 = '5 6 10 4 7 18 200'

      const squaring = (number) => {
        return Math.pow(number, 2)
      }

      const str8 = str7.replace(/\d+/g, squaring)

      outputOfResult(divT3, str8, str7)

      // задание 4

      const divT4 = d.querySelector('.divT4')
      const str9 = "2aaa'3'bbb'23''4'"

      function doubling(number) {
        return number * 2
      }

      const str10 = str9.replace(/\d+(?=')/g, doubling)

      outputOfResult(divT4, str10, str9)

      // задание 5

      const divT5 = d.querySelector('.divT5')
      const str11 = "2aaa'3'{{текст}}'4'"

      function permutation_of_characters(string) {
        let arr = string.split('')
        let modified_string = ''
        for (let i = 1; i < arr.length; i++) {
          if (arr[arr.length - i] !== '{') {
            modified_string += arr[arr.length - i]
          } else {
            break
          }
        }
        return modified_string
      }

      const str12 = str11.replace(/.+?(?=\})/, permutation_of_characters)
      const str13 = str11.replace(/\{.*/, '{{')
      const str14 = str13 + str12

      outputOfResult(divT5, str14, str11)

      // задание 6

      const divT6 = d.querySelector('.divT6')
      const str15 = '23 + 35 ='

      function summation(match, match1, match2) {
        let sum = Number(match1) + Number(match2)

        return ` ${match} ${sum}`
      }

      const str16 = str15.replace(/(\d+)\s\+\s(\d+)\s=/g, summation)

      outputOfResult(divT6, str16, str15)

      // задание 7

      // alert(/^(19\d\d|20\d\d|2100)$/.test('2199'))

      const divT7 = d.querySelector('.divT7')
      const str17 = '1500г., 1951г., 2015рлдирлд'

      function definitionOfTheYear(year) {
        let strPositive = `${year} - год, попадающий в интервал между 1900 и 2100 годами <br>`
        let strNegative = `${year} - год, не попадающий в интервал между 1900 и 2100 годами <br>`
        if (year >= 1900 && year <= 2100) return strPositive
        else return strNegative
      }

      const str18 = str17.replace(/\d{4}/g, definitionOfTheYear)

      outputOfResult(divT7, str18, str17)

      // задание 8

      // alert(/^([01]\d|2[0-3]):[0-5]\d$/.test('24:00'));

      const divT8 = d.querySelector('.divT8')
      const str19 =
        "'12:59', '23:71', '12.59', '28:01', '23:41', '12.60', '12.93'"

      function timeValidation(string) {
        let strPositive = `${string} - корректная запись времени <br>`
        let strNegative = `${string} - некорректная запись времени <br>`

        let hours = string.match(/\d\d/g)[0]
        let minutes = string.match(/\d\d/g)[1]

        if (hours >= 24 || hours < 0 || minutes > 59 || minutes < 0)
          return strNegative
        else return strPositive
      }

      const str20 = str19.replace(/'\d\d:\d\d',?/g, timeValidation)
      const str21 = str20.replace(
        /'\d\d\.\d\d',?/g,
        `$& - некорректная запись времени <br>`
      )

      outputOfResult(divT8, str21, str19)

      // задание 9

      const divT9 = d.querySelector('.divT9')
      const str22 = ' 15.53 am строка является корректным временем?'
      // const str23 = /([01]\d|2[0-3])\.[0-5]\d\s[ap]m/
      const str23 = /(?:1?[01]|[0-9])\.[0-5][0-9]/

      let str24 = ''

      if (str23.test(str22)) {
        str24 = 'да, время записано правильно'
      } else str24 = 'нет, время записано неверно'

      outputOfResult(divT9, str24, str22)

      // задание 10

      // var res = 'aaa zzqzqaq hsdds'.replace(/\W*\w*(\w)\1\w*\W*/g, ' ')

      const divT10 = d.querySelector('.divT10')
      const str25 =
        'пrrрttеyyдuuлggоbbжrrееенbbиннеkk бььеwwзyy оttдeeиrrнyyаbbкvvоccвssыaaхgg iiбiiуuuкqqвaa'

      // первый вариант
      // const str26 = str25.replace(/\w\w/g, (str) => {
      //   if (str.split('')[0] == str.split('')[1]) {
      //     return ''
      //   } else {
      //     return str
      //   }
      // })

      // второй вариант

      // const str26 = str25.replace(/(\w)(\w)/g, (str, symbolOne, symbolTwo) => {
      //   if (symbolOne == symbolTwo) {
      //     return ''
      //   } else {
      //     return str
      //   }
      // })

      // улучшенный вариант

      const str26 = str25.replace(/([\w\W{А-Яа-яЁё}])\1/g, '')

      outputOfResult(divT10, str26, str25)
      // outputOfResult(divT10, res)

      // задание 11

      const divT11 = d.querySelector('.divT11')
      const str27 = 'dsf xxx xxx sd'

      const str28 = str27.replace(/\b(\w+)\s\1/g, '$1')

      outputOfResult(divT11, str28, str27)

      // задание 12

      const divT12 = d.querySelector('.divT12')
      const str29 = 'dsf xxx xxx xxx xxx xxx sd'

      // const str30 = str29.replace(/\b(\w+)(?:\s\1)+/g, '$1')
      const str30 = str29.replace(/\b(\w+)\b(?:\s+\1\b)+/g, '$1') //у Трепачёва

      outputOfResult(divT12, str30, str29)
    </script>
  </body>
</html>
